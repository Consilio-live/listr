<main class="row">
    <div class="panel panel-default">
        <div class="panel-heading">
            Your Shopping List
        </div>
        <!-- where the form for creating a entry is -->
        <div class="panel-body">

            <button class="btn"
                    type="button"
                    data-toggle="modal"
                    data-target="#formModal"
                    id="addItem">
                <span class="glyphicon glyphicon-plus">
                </span>
            </button>

            <div class="modal fade" id="formModal"
                 tabindex="-1" role="dialog" 
                 labelledby="formModalLabel">

                <div class="modal-dialog" role="form">
                    <div class="modal-content">
                        <div class="modal-header">

                            <button type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close">
                                <span aria-hidden="true">
                                    &times;
                                </span>
                            </button>
                            <h4 class="modal-title"  
                                id="formModalLabel">
                                Add a new item to 
                                your list!
                            </h4>

                        </div> <!-- end modal-header -->
                        <div class="modal-body">

                            <form name="item" ng-submit="addItem()" novalidate>
                                <div class="form-group" 
                                     ng-class="{'has-error': item.upc.$invalid && !item.upc.$prestine}"
                                     >
                                    <label for="upc">
                                        UPC
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           name="upc" 
                                           id="upc" 
                                           placeholder="0"
                                           ng-model="formUPC" 
                                           ng-pattern="/^\d+$/" />
                                    <p class="help-block" ng-hide="item.upc.$valid">
                                        Needs to be an integer.
                                    </p>
                                </div>
                                <div class="form-group">
                                    <label for="product">
                                        Product
                                    </label>
                                    <input type="text" 
                                           name="product"
                                           class="form-control" 
                                           id="product" 
                                           ng-model="formProduct"
                                           required/>
                                </div>
                                <div class="form-group" 
                                     ng-class="{
                                               'has-error': item.onHand.$invalid && !item.onHand.$pristine
                                               }"
                                     >
                                    <label for="onHand">
                                        Quantity
                                    </label> 
                                    <input type="text" 
                                           name="onHand" 
                                           class="form-control" 
                                           id="onHand" 
                                           placeholder="0"
                                           ng-model="formOnHand" 
                                           ng-pattern="/^\d+$/" 
                                           required
                                           />
                                    <p class="help-block" ng-hide="item.onHand.$valid">
                                        Needs to be an integer.
                                    </p>
                                </div>

                                <div class="form-group" 
                                     ng-class="{
                                               'has-error': !item.needed.$valid
                                               }"
                                     >
                                    <label for="needed">
                                        Needed
                                    </label> 
                                    <input type="text" 
                                           class="form-control" 
                                           id="needed" 
                                           name="needed" 
                                           placeholder="0"
                                           ng-model="formNeeded" 
                                           ng-pattern="/\d+/" 
                                           required/>
                                    <p class="help-block" ng-hide="item.needed.$valid">
                                        Needs to be an integer.
                                    </p>
                                </div>

                                <button type="submit" 
                                        class="btn" 
                                        id="addSubmit" 
                                        ng-disabled="!(item.needed.$valid && item.upc.$valid && item.product.$valid)">
                                    Submit
                                </button>
                            </form> 
                        </div> 
                    </div> <!-- end modal-content -->
                </div><!-- end modal-dialog -->

            </div><!-- end formModal -->

        </div>
        <!-- each entry in the shopping list -->
        <table class="table">
            <thead>
                <th>
                    UPC
                </th>
                <th>
                    Product
                </th>
                <th>
                    Quantity 
                </th>
                <th>
                    Needed
                </th>
                <th>
                    Maintain
                </th>
            </thead>
            <tbody id="bootstrap-override" ng-controller="item">
                <tr class="item-row" ng-repeat="item in list"
                    ng-class="colorRows(item)">

                    <td class="upc" ng-cloak>
                        {{ item.upc }}
                    </td>

                    <td class="product" ng-cloak>
                        {{ item.product }}
                    </td>

                    <td class="quantity" ng-cloak>
                        {{ item.onHand }}
                    </td>

                    <td class="needed" ng-cloak>
                        {{ item.needed }}
                    </td>

                    <td class="maintain">
                        <div class="btn-group"
                             role="group">
                            <button name="add" 
                                    class="add btn btn-default"
                                    type="button"
                                    ng-click="changeQuantity(item,
                                              'add')"
                                    >
                                Add
                            </button>

                            <button name="sub" 
                                    class="sub btn btn-default"
                                    type="button"
                                    ng-click="changeQuantity(item,
                                              'sub')"
                                    >
                                Subtract
                            </button>

                            <button type="button" 
                                    class="btn btn-default"
                                    ng-click="deleteItem(item.id)"
                                    >

                                <span class="glyphicon glyphicon-trash">
                                </span>
                            </button>
                        </div> <!-- end .btn-group -->
                    </td> <!-- end .maintain-->
                </tr>
            </tbody>
        </table>
        <h4>Printable report</h4>
        <form class="form-inline" method="get" action="report">
            <div class="form-group">
                <label for="low">Only low Quantity?</label>
                <input type="checkbox" name="low" id="low" />
            </div>
            <button type="submit" class="btn btn-default btn-sm" 
                    ng-click="printReport()">
                Print Report
            </button>
        </form>
    </div> <!-- end panel -->
</main> <!-- end main -->
